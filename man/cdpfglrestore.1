.TH "cdpfglrestore" "1" "" "cdpfglrestore user manual" "version 0.0.12"
.SH NAME
.PP
\f[B]cdpfglrestore\f[] \- restores already saved files from a
cdpfglserver to your local filesystem.
.SH SYNOPSIS
.PP
\f[B]cdpfglrestore\f[] [options]
.SH DESCRIPTION
.PP
cdpfglrestore will restore already saved files from a cdpfglserver to
your local filesystem.
cdpfglrestore will not overwrite an existing file, in that case it will
create a backup file before restoring over it.
.SH COMMAND LINE OPTIONS
.PP
Default options configuration values may be replaced by values read from
a configuration file (the default one for instance) and those one may be
replaced by options read from the command line.
.PP
\f[B]\-h\f[], \f[B]\-\-help\f[]:
.PP
Gives some basic help about program invocation and its options.
.PP
\f[B]\-d\f[], \f[B]\-\-debug=0|1\f[]:
.PP
When invoked with 0 debug mode is turned off.
Debug mode is turned on when invoked with 1.
When on this mode is really verbose and may slow down the program.
You should not use this option in daily normal use.
.PP
\f[B]\-v\f[], \f[B]\-\-version\f[]:
.PP
Gives compiled version of cdpfglrestore plus some informations about
libraries that were compiled with it and also some configuration
informations as the program has loaded them.
.PP
\f[B]\-c\f[], \f[B]\-\-configuration=FILENAME\f[]:
.PP
Specify an alternative configuration file.
This file is read instead of the default one.
.PP
\f[B]\-l\f[], \f[B]\-\-list=REGEX\f[]:
.PP
Gives a list of saved files that correspond to the given REGEX.
For instance one may use \-\-list=.mp3$ to list all files ending with
\[aq].mp3\[aq] or \-l ^/home/me/tmp to list all files from the
\[aq]/home/me/tmp\[aq] directory.
.PP
\f[B]\-r\f[], \f[B]\-\-restore=REGEX\f[]:
.PP
Restores requested filename (REGEX).
It restores the latest file in the returned list with \-l option.
.PP
\f[B]\-n\f[], \f[B]\-\-hostname=HOSTNAME\f[]:
.PP
By default cdpfglrestore uses the hostname of the host where it is
executed to search files for.
With this option one can search (and restore) files from an another host
(for instance one may want to restore /etc/fstab of an unbootable
machine).
.PP
\f[B]\-t\f[], \f[B]\-\-date=DATE\f[]:
.PP
Lists or restores the selected file at that specific DATE (YYYY\-MM\-DD
HH:MM:SS format).
.PP
\f[B]\-a\f[], \f[B]\-\-after=DATE\f[]:
.PP
Lists or restores the selected file with mtime after DATE (YYYY\-MM\-DD
HH:MM:SS format).
.PP
\f[B]\-b\f[], \f[B]\-\-before=DATE\f[]:
.PP
Lists or restores the selected file with mtime before DATE (YYYY\-MM\-DD
HH:MM:SS format).
.PP
\f[B]\-e\f[], \f[B]\-\-all\-versions\f[]:
.PP
Lists or restores all versions of a file.
.PP
\f[B]\-f\f[], \f[B]\-\-all\-files\f[]:
.PP
In conjunction with \-r restores all files found by \-r REGEX (or \-l
REGEX).
This option has no real effect with \-l option and only works when
restoring in conjunction with \-r option.
.PP
\f[B]\-g\f[], \f[B]\-\-latest\f[]:
.PP
Filters out all versions of a file to keep only the latest one.
.PP
\f[B]\-P\f[], \f[B]\-\-parents\f[]:
.PP
Restores files with their full path and creates directories if needed.
For instance, with this option, restoring
\f[C]/home/dup/directory1/example.txt\f[] file in \f[C]/tmp/restore\f[]
directory will create
\f[C]/tmp/restore/home/dup/directory1/example.txt\f[] file.
.PP
\f[B]\-w\f[], \f[B]\-\-where=DIRECTORY\f[]:
.PP
Specify a DIRECTORY where to restore a file.
.PP
\f[B]\-i\f[], \f[B]\-\-ip=IP\f[]:
.PP
IP address where server program is waiting for the restore program to
send POST and GET commands.
.PP
\f[B]\-p\f[], \f[B]\-\-port=NUMBER\f[]:
.PP
Port NUMBER on which to listen (default is 5468).
.SH EXAMPLES
.PP
A typical restore session starts by listing saved files known by the
server.
At first you must provide the filename or a REGEX representing the
filename that you want to restore:
.PP
\f[C]cdpfglrestore\ \-l\ myfile\f[]
.PP
This command will give you a list of files that can be restored.
If you simply replace \f[C]\-l\f[] by \f[C]\-r\f[] it will restore the
last file of the list obtained with \f[C]\-l\f[] option:
.PP
\f[C]cdpfglrestore\ \-r\ myfile\f[]
.PP
To filter a bit the results obtained with \f[C]\-l\f[] option you can
use \f[C]\-a\f[], \f[C]\-b\f[], \f[C]\-t\f[] options with a date
(YYYY\-MM\-DD HH:MM:SS format).
The date may be incomplete.
For instance \f[C]2016\-12\f[] and \f[C]2016\-12\-26\ 17\f[] are valid
dates but \f[C]\-12\-26\ 17:33\f[] isn\[aq]t.
.SH SEE ALSO
.PP
\f[B]cdpfglclient\f[](1), \f[B]cdpfglserver\f[](1)
.SH FILES
.PP
\f[C]/etc/cdpfgl/restore.conf\f[] is the default configuration file.
.SH BUGS
.PP
Please report bugs by either filling an issue at
<https://github.com/dupgit/sauvegarde/issues> or a pull request at
<https://github.com/dupgit/sauvegarde/pulls> or by sending a mail to
Olivier Delhomme <olivier.delhomme@free.fr>
.SH AUTHORS
.PP
Authors in alphabetical order are :
.IP \[bu] 2
Pierre Bourgin <pierre.bourgin@free.fr>
.PD 0
.P
.PD
.IP \[bu] 2
Olivier Delhomme <olivier.delhomme@free.fr>
.PD 0
.P
.PD
.IP \[bu] 2
Sebastien Tricaud <sebastien@honeynet.org>
